<!doctype html><html lang=en><head><title>Setup passwordless access via SSH to a remote server · frikyfriky11</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Stefano Previato"><meta name=description content="A quick and easy way to setup passwordless access to a remote server via SSH with the help of a PowerShell one-liner"><meta name=keywords content="blog,developer,personal,software engineer"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setup passwordless access via SSH to a remote server"><meta name=twitter:description content="A quick and easy way to setup passwordless access to a remote server via SSH with the help of a PowerShell one-liner"><meta property="og:title" content="Setup passwordless access via SSH to a remote server"><meta property="og:description" content="A quick and easy way to setup passwordless access to a remote server via SSH with the help of a PowerShell one-liner"><meta property="og:type" content="article"><meta property="og:url" content="https://frikyfriky11.github.io/posts/passwordless-access-ssh/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-04T22:55:00+02:00"><meta property="article:modified_time" content="2022-09-04T22:55:00+02:00"><link rel=canonical href=https://frikyfriky11.github.io/posts/passwordless-access-ssh/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.c4d7e93a158eda5a65b3df343745d2092a0a1e2170feeec909b8a89443903c6a.css integrity="sha256-xNfpOhWO2lpls980N0XSCSoKHiFw/u7JCbiolEOQPGo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.39e41a7f16bdf8cb16e43cae7d714fa1016f1d2d2898a5b3f27f42c9979204e2.css integrity="sha256-OeQafxa9+MsW5DyufXFPoQFvHS0omKWz8n9CyZeSBOI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.112.7"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>frikyfriky11</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/categories/>Categories</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/about/>About me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://frikyfriky11.github.io/posts/passwordless-access-ssh/>Setup passwordless access via SSH to a remote server</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2022-09-04T22:55:00+02:00>September 4, 2022</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
2-minute read</span></div><div class=authors><i class="fa fa-user" aria-hidden=true></i>
<a href=/authors/stefano-previato/>Stefano Previato</a></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/powershell/>PowerShell</a>
<span class=separator>•</span>
<a href=/categories/security/>Security</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/powershell/>PowerShell</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/ssh/>SSH</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/passwordless/>passwordless</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/server/>server</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/one-liner/>one-liner</a></span></div></div></header><div><p>Managing remote servers is part of my job as a software engineer, and I usually access them via SSH.</p><p>One thing that is really annoying is typing your password every single time, and for obvious reason setting an empty password is not a workaround :)</p><p>SSH servers usually support key authentication besides password authentication (sometimes it is even the only method of authentication allowed!), and making the server trust your computer is trivially easy to do.</p><p>If you never setup your SSH keys, open up a PowerShell and type:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>ssh-keygen</span>
</span></span></code></pre></div><p>This command will generate a new key pair for your SSH client.</p><p>If you already did that, you can skip the key generation as your existing keys can be used as well.</p><p>Next, we need to append your public client key (that you just generated or that you already have) to the list of authorized keys on the SSH server.</p><p>To do this, we can pipe a couple of commands together in a beautiful PowerShell one-liner:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#6272a4># as an example, let&#39;s assume our server is called `myserver`</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>type </span><span style=color:#8be9fd;font-style:italic>$env:USERPROFILE</span>\.ssh\id_rsa.pub | ssh myserver <span style=color:#f1fa8c>&#34;cat &gt;&gt; .ssh/authorized_keys&#34;</span>
</span></span></code></pre></div><p>Let me explain what the above command does:</p><ul><li><code>type</code> literally types the content of the parameter passed, in this case the <code>id_rsa.pub</code> file that is found inside the <code>.ssh</code> folder of the current user directory (that&rsquo;s what <code>$env:USERPROFILE</code> does)</li><li><code>ssh myserver</code> opens a new connection to the remote server and executes the command passed as a parameter</li><li><code>cat >> .ssh/authorized_keys</code> is a command that takes the standard input and appends it (with the <code>>></code> operator) in the specified file</li></ul><p>Since we&rsquo;re using the pipe operator (<code>|</code>), the output of the <code>type</code> command is being redirected to the input of the <code>ssh</code> command.</p><p>Run the command, type in your password (for the last time!) and wait. Once the operation is done, the SSH connection is automatically closed.</p><p>You could run into this error if the .ssh/authorized_keys file does not exist in the remote server:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>bash: line 1: .ssh/authorized_keys: No such file or directory
</span></span></code></pre></div><p>To fix this, simply create the directory and the file on the remote server:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>ssh myserver <span style=color:#f1fa8c>&#34;mkdir .ssh &amp;&amp; cd .ssh &amp;&amp; touch authorized_keys&#34;</span>
</span></span></code></pre></div><p>Now run the command above again, everything should work just fine.</p><p>You&rsquo;re ready to connect to the SSH server without ever using your password again!</p><p>Remember, you need to repeat this process whenever you access a new server or if you lose your SSH keys for some reason, such as formatting your PC.</p><p>Enjoy some passwordless SSH fun!</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2019 -
2023
Stefano Previato
·
Licensed under <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA-4.0</a>
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script>
<script type=application/javascript>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="https://matomo.frikydesign.it/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","10"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>