<!doctype html><html lang=en><head><title>Batch rotating multiple mp4 videos (useful for Instagram Reels) · frikyfriky11</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Stefano Previato"><meta name=description content="Rotate an entire folder of multiple mp4 videos with a single PowerShell script, useful if you like to edit videos for Instagram Reels"><meta name=keywords content="blog,developer,personal,software engineer"><meta name=twitter:card content="summary"><meta name=twitter:title content="Batch rotating multiple mp4 videos (useful for Instagram Reels)"><meta name=twitter:description content="Rotate an entire folder of multiple mp4 videos with a single PowerShell script, useful if you like to edit videos for Instagram Reels"><meta property="og:title" content="Batch rotating multiple mp4 videos (useful for Instagram Reels)"><meta property="og:description" content="Rotate an entire folder of multiple mp4 videos with a single PowerShell script, useful if you like to edit videos for Instagram Reels"><meta property="og:type" content="article"><meta property="og:url" content="https://frikyfriky11.github.io/posts/batch-rotating-mp4-videos-for-reels/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-31T21:43:06+02:00"><meta property="article:modified_time" content="2022-08-31T21:43:06+02:00"><link rel=canonical href=https://frikyfriky11.github.io/posts/batch-rotating-mp4-videos-for-reels/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.c4d7e93a158eda5a65b3df343745d2092a0a1e2170feeec909b8a89443903c6a.css integrity="sha256-xNfpOhWO2lpls980N0XSCSoKHiFw/u7JCbiolEOQPGo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.39e41a7f16bdf8cb16e43cae7d714fa1016f1d2d2898a5b3f27f42c9979204e2.css integrity="sha256-OeQafxa9+MsW5DyufXFPoQFvHS0omKWz8n9CyZeSBOI=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.112.7"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>frikyfriky11</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/categories/>Categories</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/about/>About me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://frikyfriky11.github.io/posts/batch-rotating-mp4-videos-for-reels/>Batch rotating multiple mp4 videos (useful for Instagram Reels)</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2022-08-31T21:43:06+02:00>August 31, 2022</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
2-minute read</span></div><div class=authors><i class="fa fa-user" aria-hidden=true></i>
<a href=/authors/stefano-previato/>Stefano Previato</a></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/instagram/>Instagram</a>
<span class=separator>•</span>
<a href=/categories/video/>Video</a>
<span class=separator>•</span>
<a href=/categories/powershell/>PowerShell</a></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/video/>video</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/rotating/>rotating</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/batch/>batch</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/reels/>reels</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/instagram/>Instagram</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/ffmpeg/>ffmpeg</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/powershell/>PowerShell</a></span></div></div></header><div><p>Whenever I have some free time (almost never these days, sigh!), you can find me shooting photos around the city. Usually I like to post the best content of a shooting day on Instagram, and while I am mostly focused on photography, I sometimes like to post some videos as Instagram Reels as well.</p><p>Instagram Reels have a 9:16 aspect ratio (1080x1920) while my camera (a Canon EOS R) shoots in 9:16 (1920x1080) and doesn&rsquo;t automatically rotate the videos when I shoot them portrait, unlike the photo mode that does this by default.</p><p>Whenever you load the files in Premiere Pro, they are all in landscape orientation, and rotating them to portrait is just way too much work for some fun free time activity.</p><p>Luckily, the universe brought us the <a href=https://ffmpeg.org/>ffmpeg</a> tool, made by some of the most amazing developers around, and it&rsquo;s free to use too! It&rsquo;s very likely that you already have this tool installed on your machine, but if you don&rsquo;t have it I&rsquo;d suggest taking a look at the <a href=https://codecguide.com/download_kl.htm>K-Lite Codec Pack</a> project. It&rsquo;s a collection of the most used (and not so used) codecs and tools for video playback, and it includes <code>ffmpeg</code> as well!</p><p>Once you have installed it, you can use this little snippet of PowerShell code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>ls </span>-Filter *.mp4 | <span style=color:#ff79c6>foreach</span> {
</span></span><span style=display:flex><span>  ffmpeg -i <span style=color:#8be9fd;font-style:italic>$_</span>.FullName -metadata:s:v rotate=<span style=color:#bd93f9>90</span> -vcodec <span style=color:#8be9fd;font-style:italic>copy </span>-acodec <span style=color:#8be9fd;font-style:italic>copy </span><span style=color:#f1fa8c>&#34;</span>$(<span style=color:#8be9fd;font-style:italic>$_</span>.BaseName)<span style=color:#f1fa8c>-rotated.mp4&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#8be9fd;font-style:italic>Get-Item</span> <span style=color:#f1fa8c>&#34;</span>$(<span style=color:#8be9fd;font-style:italic>$_</span>.BaseName)<span style=color:#f1fa8c>-rotated.mp4&#34;</span>).CreationTime = (<span style=color:#8be9fd;font-style:italic>Get-Item</span> <span style=color:#8be9fd;font-style:italic>$_</span>.FullName).CreationTime
</span></span><span style=display:flex><span>  (<span style=color:#8be9fd;font-style:italic>Get-Item</span> <span style=color:#f1fa8c>&#34;</span>$(<span style=color:#8be9fd;font-style:italic>$_</span>.BaseName)<span style=color:#f1fa8c>-rotated.mp4&#34;</span>).LastWriteTime = (<span style=color:#8be9fd;font-style:italic>Get-Item</span> <span style=color:#8be9fd;font-style:italic>$_</span>.FullName).LastWriteTime
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Let me explain what this does:</p><ul><li>first, it enumerates the contents of the current folder, searching for *.mp4 files</li><li>for each file, it invokes the <code>ffmpeg</code> utility with the following parameters:<ul><li><code>-i $_.FullName</code> to indicate the input file (<code>$_</code> in a PowerShell <code>foreach</code> indicates the current item)</li><li><code>-metadata:s:v rotate=90</code> sets the <code>rotate</code> metadata to <code>90</code> for all the video streams in the file</li><li><code>-vcodec copy -acodec copy</code> copies all the audio and video streams as they are</li><li><code>"$($_.BaseName)-rotated.mp4"</code> sets the output file name to be the same as the input name (without extension) with the added <code>-rotated</code> suffix</li></ul></li><li>next, it takes the original file <code>CreationTime</code> and <code>LastWriteTime</code> and copies them to the newly generated file</li></ul><p>That&rsquo;s it! You now have the ability to rotate a bunch of video files with just a couple of keystrokes instead of doing it by hand one by one!</p><p>Have fun!</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2019 -
2023
Stefano Previato
·
Licensed under <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA-4.0</a>
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js integrity="sha256-I2BJOV3DaC+ycZZAhylY4S8fJAZ7sJwyeyM+YpDH7aw="></script>
<script type=application/javascript>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="https://matomo.frikydesign.it/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","10"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>